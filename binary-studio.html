<script>

	class Fighter{

		constructor(name = "Somebody", power = "1", health = "10"){
			this.name = name;
			this.power = power;
			this.health = health;
		}

		setDamage(damage){
			this.health = this.health - damage;
			if(this.health > 0){
				console.log(`${this.name}'s health is ${this.health}`);
				console.log(`---------------------------------------`);
			}else{
				console.log(`${this.name} lost the battle`);
			}
		}

		hit(enemy, point){
			let damage = point * this.power;
			enemy.setDamage(damage);
		}

	}

	class ImprovedFighter extends Fighter{
		doubleHit(enemy, point){
			let double = point => point * 2;
			super.hit(enemy, double(point));
		}
	}

	{
		let name = "Klichko";
		let power = 2;
		let health = 10;

		let fighter= new Fighter("Valuev");
		let improvedFighter = new ImprovedFighter(name, power, health);

		fight(fighter, improvedFighter, 1, 2, 3, 4, 5, 6);
	}

	function fight(fighter, improvedFighter, ...point){
		let i = 0;
		while(fighter.health > 0){
			console.log(`${fighter.name} hit ${improvedFighter.name}`);
			fighter.hit(improvedFighter, point[i]);
			i++;
			if(improvedFighter.health > 0){
				console.log(`${improvedFighter.name} hit ${fighter.name}`);
				improvedFighter.doubleHit(fighter, point[i]);
				i++;
			}
		}
	}

</script>
